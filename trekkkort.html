<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kortstokk</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-image: url('bakgrunn.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .money-box {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: white;
            padding: 20px;
            border: 3px solid black;
            border-radius: 10px;
            font-family: Arial, sans-serif;
            font-size: 24px;
            font-weight: bold;
            width: 200px;
            text-align: center;
        }

        .input-container {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        #verdiPenger {
            width: 200px;
            height: 40px;
            font-size: 18px;
        }

        .button-container {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .hitbtn, .standbtn {
            width: 150px;
            height: 150px;
            border: 2px solid black;
            border-radius: 15px;
            cursor: pointer;
            font-size: 18px;
        }

        .hitbtn { background-color: rgba(150, 30, 30, 0.7); }
        .standbtn { background-color: rgba(44, 98, 160, 0.7); }

        .score-container {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: white;
            padding: 10px 20px;
            border: 3px solid black;
            border-radius: 10px;
            font-family: Arial, sans-serif;
            font-size: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="money-box" id="moneyBox">Penger: 0</div>

    <div class="input-container" id="inputContainer">
        <input type="number" id="verdiPenger" placeholder="Sett inn penger">
        <button onclick="settPenger()">OK</button>3
    </div>

    <div class="button-container">
        <button id="higher" class="hitbtn">Hit</button>
        <button id="lower" class="standbtn">Stand</button>
    </div>

    <div class="dealkort"></div>
    <div class="spillkortt"></div>

    <div id="melding" class="score-container">Velkommen!</div>

    <script>
        let penger = 0;

        function settPenger() {
            const inputElement = document.getElementById("verdiPenger");
            penger = Number(inputElement.value);
            if (penger > 0) {
                document.getElementById("inputContainer").style.display = "none";
                oppdaterPenger();
            } else {
                alert("Du må skrive inn en gyldig sum!");
            }
        }

        function oppdaterPenger() {
            document.getElementById("moneyBox").innerText = "Penger: " + penger;
        }

        document.getElementById("higher").addEventListener("click", hit);
        document.getElementById("lower").addEventListener("click", dealer);

        let spillerKort = [];
        let dealerKort = [];
        const dealerKortElm = document.querySelector(".dealkort");
        const spillerKortElm = document.querySelector(".spillkortt");

        function trekkKort() {
            const tall = Math.floor(Math.random() * 13) + 1;
            const sort = Math.floor(Math.random() * 4) + 1;
            let a = ["_of_diamonds.png", "_of_spades.png", "_of_hearts.png", "_of_clubs.png"][sort - 1];
            return { tall: tall > 10 ? 10 : tall, image: `${tall}${a}` };
        }

        function beregnSum(kort) {
            let sum = 0;
            let ess = 0;
            for (let k of kort) {
                sum += k.tall;
                if (k.tall === 1) ess++;
            }
            while (ess > 0 && sum + 10 <= 21) {
                sum += 10;
                ess--;
            }
            return sum;
        }

        function hit() {
            if (penger <= 0) {
                alert("Du har ikke nok penger! Start på nytt.");
                return;
            }
            let nyttKort = trekkKort();
            spillerKort.push(nyttKort);
            let sum = beregnSum(spillerKort);
            const kortspillImg = document.createElement("img");
            kortspillImg.src = "kortstokk/" + nyttKort.image;
            spillerKortElm.appendChild(kortspillImg);
            document.getElementById("melding").innerText = "Sum: " + sum;
            if (sum > 21) {
                document.getElementById("melding").innerText = "Du tapte!";
                penger -= 10;
                oppdaterPenger();
            }
        }

        function dealer() {
            if (penger <= 0) {
                alert("Du har ikke nok penger! Start på nytt.");
                return;
            }
            let dealerSum = beregnSum(dealerKort);
            while (dealerSum < 17) {
                let nyttKort = trekkKort();
                dealerKort.push(nyttKort);
                const kortdealImg = document.createElement("img");
                kortdealImg.src = "kortstokk/" + nyttKort.image;
                dealerKortElm.appendChild(kortdealImg);
                dealerSum = beregnSum(dealerKort);
            }
            let spillerSum = beregnSum(spillerKort);
            if (dealerSum > 21 || spillerSum > dealerSum) {
                document.getElementById("melding").innerText = "Du vant!";
                penger += 20;
            } else if (dealerSum === spillerSum) {
                document.getElementById("melding").innerText = "Uavgjort!";
            } else {
                document.getElementById("melding").innerText = "Huset vant!";
                penger -= 10;
            }
            oppdaterPenger();
        }
    </script>
</body>
</html>
